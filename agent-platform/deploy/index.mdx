# Deployment

Publish your agentic app and make it available to users.

---

## Overview

Deployment is the process of moving your application from development to a live environment where users can interact with it. The platform supports versioned deployments with environment isolation.

---

## Deployment Lifecycle

```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│   Develop   │────▶│   Version   │────▶│   Deploy    │
└─────────────┘     └─────────────┘     └─────────────┘
                                              │
                    ┌─────────────────────────┼─────────────────────────┐
                    │                         │                         │
                    ▼                         ▼                         ▼
             ┌─────────────┐          ┌─────────────┐          ┌─────────────┐
             │    Draft    │          │   Staging   │          │ Production  │
             │ Environment │          │ Environment │          │ Environment │
             └─────────────┘          └─────────────┘          └─────────────┘
```

---

## Creating a Version

Versions are immutable snapshots of your app configuration.

### Step 1: Validate

Run diagnostics to ensure your app is ready:

```
✓ All agents configured
✓ Tools deployed
✓ Knowledge connected
✓ Events configured
✓ No missing dependencies
```

### Step 2: Create Version

1. Navigate to **Deploy** → **Versions**
2. Click **Create Version**
3. Enter version details:

```yaml
version: 1.2.0
description: Added refund processing agent and updated FAQ knowledge
changelog:
  - Added Refund Agent
  - Updated product knowledge base
  - Fixed timeout issues in order lookup tool
```

4. Click **Create**

### Version Benefits

| Benefit | Description |
|---------|-------------|
| **Immutable** | Once deployed, versions don't change |
| **Rollback** | Revert to previous versions if needed |
| **Isolation** | Different versions in different environments |
| **Protection** | Tools linked to active versions can't be deleted |

---

## Environments

Environments are isolated deployment targets with their own configurations.

### Default Environment

Every app starts with a **Draft** environment for development and testing.

### Creating Environments

```yaml
environments:
  - name: staging
    description: Pre-production testing
    url: https://staging.myapp.kore.ai

  - name: production
    description: Live user traffic
    url: https://app.myapp.kore.ai
```

### Environment Isolation

Each environment maintains:

- Separate URL endpoints
- Independent configuration
- Own deployment history
- Isolated API keys

---

## Deploying to an Environment

### Step 1: Select Version

Choose which version to deploy.

### Step 2: Choose Environment

Select the target environment.

### Step 3: Configure Settings

Environment-specific overrides:

```yaml
environment: production

overrides:
  # Use production API keys
  env_variables:
    API_KEY: "{{secrets.PROD_API_KEY}}"

  # Production model settings
  model:
    temperature: 0.3  # More conservative in production

  # Rate limiting
  rate_limits:
    requests_per_minute: 1000
```

### Step 4: Deploy

Click **Deploy** to publish.

---

## Access Methods

### Web Widget

Embed the app in your website with a single script:

```html
<!-- Add to your website -->
<div id="chat-container"></div>
<script src="https://widget.kore.ai/v1/loader.js"
        data-app-id="your-app-id"
        data-container="chat-container">
</script>
```

**Configuration options**:
```javascript
KoreWidget.init({
  appId: 'your-app-id',
  containerId: 'chat-container',
  theme: 'light',  // or 'dark'
  position: 'bottom-right',
  greeting: 'Hi! How can I help you today?'
});
```

### API Integration

Direct API access for custom integrations:

```bash
# Execute a conversation
curl -X POST https://api.kore.ai/v1/apps/{app_id}/execute \
  -H "Authorization: Bearer {api_key}" \
  -H "Content-Type: application/json" \
  -d '{
    "message": "What is your return policy?",
    "session_id": "user_session_123",
    "metadata": {
      "user_id": "user_456"
    }
  }'
```

**Response**:
```json
{
  "response": "Our return policy allows returns within 30 days...",
  "session_id": "user_session_123",
  "agent": "support_agent",
  "tools_used": ["knowledge_search"],
  "tokens": {
    "input": 45,
    "output": 128
  }
}
```

### Channel Integrations

Deploy to messaging platforms:

- **Slack**: Slack app integration
- **Microsoft Teams**: Teams bot
- **Web Chat**: Embedded widget
- **Voice**: Via AI for Service

---

## API Keys

Secure access to your deployed app.

### Generating Keys

1. Navigate to **Deploy** → **API Keys**
2. Click **Generate Key**
3. Enter a descriptive name
4. Copy and store securely

```
Name: Production Web App
Key: sk-app-xxxxxxxxxxxxxxxxxxxx

⚠️ This key won't be shown again. Store it securely.
```

### Key Management

- Rotate keys periodically
- Use separate keys for different clients
- Revoke compromised keys immediately

---

## Rollback

Revert to a previous version if issues arise.

### Quick Rollback

1. Navigate to **Deploy** → **History**
2. Find the previous working version
3. Click **Rollback**
4. Confirm the action

### Deployment History

Track all deployments:

```
┌─────────────────────────────────────────────────────────────┐
│ Deployment History - Production                              │
├─────────────────────────────────────────────────────────────┤
│ Version │ Deployed        │ By           │ Status           │
├─────────────────────────────────────────────────────────────┤
│ 1.2.0   │ 2024-01-15 14:30│ alice@co.com │ ● Active        │
│ 1.1.0   │ 2024-01-10 09:15│ bob@co.com   │ ○ Previous      │
│ 1.0.0   │ 2024-01-05 11:00│ alice@co.com │ ○ Previous      │
└─────────────────────────────────────────────────────────────┘
```

---

## Pre-Deployment Checklist

Before deploying to production:

```markdown
## Configuration
- [ ] All agents tested and configured
- [ ] Tools deployed and tested
- [ ] Knowledge bases connected and indexed
- [ ] Guardrails enabled and configured
- [ ] PII protection configured

## Testing
- [ ] Diagnostics pass with no errors
- [ ] Key user flows tested
- [ ] Edge cases validated
- [ ] Error handling verified

## Security
- [ ] API keys generated
- [ ] Access controls configured
- [ ] Sensitive data protected
- [ ] Rate limits set

## Monitoring
- [ ] Analytics enabled
- [ ] Alerts configured
- [ ] Logging enabled
```

---

## Related

- [Diagnostics](/docs/deploy/diagnostics)
- [Analytics](/docs/analytics)
- [Guardrails](/docs/guardrails)
- [API Reference](/docs/api)
